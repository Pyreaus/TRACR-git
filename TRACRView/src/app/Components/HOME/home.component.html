<style>@media (min-width: 1400px) { .task-box { max-width:550px!important; }; }</style> 
<style>@media (min-width: 1400px) { .panel { right:20px!important; }; }</style>
<style>@media (min-width: 1400px) { .task { max-width:242px!important; };}</style>
<div class="overflow-y:scroll !important;"><div *ngIf="!ViewDiaryPanel; else dashboard;" style="height:130px;">
    </div><ng-template #dashboard>
         <div class="d-none my-3 d-md-flex pt-5" style="min-height:130px;">
            <div class="row flex-grow-1"><div class="col-xxl-4 col-xl-5 col-lg-6 col-7"></div>
                <div class="pt-4 ps-xl-0 ps-xxl-2 col-5 col-lg-6 col-xxl-8 col-xl-7">
                    <div class="row me-0" style="height:fit-content;overflow-x:hidden !important; max-height:88vh;overflow-y:scroll !important;">
                        <div class="col-xxl-6 col-12" style="height:fit-content;max-height:88vh;">
                            <div class="d-none p-0 p-xxl-0 d-lg-flex px-xl-5 row mb-3 justify-content-center" style="height:fit-content">
                                <div class="col-3"><img [src]="!user$?.Photo?'../../../assets/profilePic.png':user$.Photo"  [style.opacity]="!user$?.Photo? '0.2':'1'" style="min-height:130px;width:130px;position:relative;left:0px;" class="rounded-circle" /></div>
                                <div class="col-3"><img [style.opacity]="!currentReviewerPhoto?'0.2':'1'" [src]="!currentReviewerPhoto?'../../../assets/profilePic.png':currentReviewerPhoto" style="min-height:130px;width:130px;position:relative;left:0px;" class="rounded-circle" /></div>
                                <div class="col-3">
                                    <div class="card rounded-circle border border-dark" style="min-height:130px;width:130px;background-color:#0a0b0c47;">
                                        <b style="color:#3a3d41f6;padding-left:32px;padding-top:20px;" 
                                        [style.font-family]="datefont">{{ transformDayName(this.currentDiary.WEEK_BEGINNING!.slice(0, -9)) }}</b>
                                        <h1 style="padding-left:35px;position:relative;bottom:7px;font-size:48px;color:#3a3d41f6;" [style.font-family]="'Courier New'">
                                            <b>{{ transformDD(this.currentDiary.WEEK_BEGINNING!.slice(0, -9) )}}</b></h1>
                                        <b [style.font-family]="datefont" style="padding-left:25px;position:relative;bottom:26px;color:#3a3d41f6;">
                                            {{ abbreviatedMonthName(this.currentDiary.WEEK_BEGINNING!.slice(0, -9)) }}, {{ transformYYYY(this.currentDiary.WEEK_BEGINNING!.slice(0, -9)) }}</b>
                                    </div>
                                </div>
                                <div class="col-3">
                                    <div class="card rounded-circle" [style.background-color]="diarySignedOff?'#198754':signOffSubmitted&&!diarySignedOff?'#9d000014':'#feff037d'" style="min-height:130px;width:130px;"
                                    [style.border]="diarySignedOff?'2px solid #198754':signOffSubmitted&&!diarySignedOff?'3px solid rgb(91 35 35 / 47%)':'2px solid rgb(55 59 4 / 82%)'">
                                        <div style="position:relative;left:24px;top:23px;" *ngIf="!signOffSubmitted&&!diarySignedOff">
                                            <h6 style="color:rgba(58, 61, 65, 0.965);" [style.font-family]="datefont"><b>In Progress</b></h6>
                                            <svg xmlns="http://www.w3.org/2000/svg" style="position:relative;left:10px;bottom:0px;" width="50" height="50" fill="rgba(58, 61, 65, 0.965)" class="bi bi-pencil" viewBox="0 0 16 16">
                                                <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"/>
                                            </svg>
                                        </div>
                                        <div style="position:relative;left:23px;top:24px;" *ngIf="diarySignedOff">
                                            <h6 style="color:rgba(58, 61, 65, 0.965);" [style.font-family]="datefont"><b>Signed Off</b></h6>
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="70" height="70" style="position:relative;bottom:9px;" fill="rgba(58, 61, 65, 0.965)" class="bi bi-check2-all">
                                                <path d="M12.354 4.354a.5.5 0 0 0-.708-.708L5 10.293 1.854 7.146a.5.5 0 1 0-.708.708l3.5 3.5a.5.5 0 0 0 .708 0l7-7zm-4.208 7-.896-.897.707-.707.543.543 6.646-6.647a.5.5 0 0 1 .708.708l-7 7a.5.5 0 0 1-.708 0z"/>
                                                <path d="m5.354 7.146.896.897-.707.707-.897-.896a.5.5 0 1 1 .708-.708z"/>
                                            </svg>
                                        </div>
                                        <div style="position:relative;left:24px;top:23px;" *ngIf="signOffSubmitted&&!diarySignedOff">
                                            <h6 style="color:#dc3545;" [style.font-family]="datefont">Submitted</h6>
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" style="position:relative;right:1px;bottom:7px;" width="65" height="65" fill="#dc3545" class="ms-2 bi bi-eye">
                                                <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/>
                                                <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row px-0">
                                <div class="col-12 px-0" style="max-height:fit-content">
                                     <div style="z-index:11;position:relative;bottom:40px;min-width:620px;max-width:716px;" class="panel"><p-panel [collapsed]="true"
                                        *ngIf="(userType$|async)=='Trainee'&&step==4;" header="TRACR | Tasks" [toggleable]="true">
                                        <div *ngIf="ViewDiaryPanel" style="height:fit-content;max-height: 400px;overflow-x: hidden;overflow-y:scroll!important;">
                                            <h5 class="ms-3 text-light">View Tasks:</h5>
                                            <div class="row" style="min-width: 600px;">
                                                <div class="col-sm-12">
                                                    <div class="card task-box" style="background-color:hsl(215, 18%, 20%);">
                                                        <div class="card-body" style="max-width:700px;">
                                                            <div class="p-4 p-xxl-1 pt-0">
                                                                <div class="d-flex row" style="background-color:hsl(217, 18%, 20%);">
                                                                    <div *ngIf="!tasksVisible; else diaryTasks" class="h-100 mt-4 pe-5 pb-2 d-flex align-items-center justify-content-center text-info" style="margin-top:1vh;">
                                                                        <strong class="me-3 text-info">Loading...</strong>
                                                                        <div role="status" class="mb-0 text-info spinner-border" aria-hidden="true"></div>
                                                                    </div>
                                                                    <ng-template #diaryTasks>
                                                                        <div *ngFor="let displayTask of displayTasks$;let i = index" class="card task col-6 py-2 me-4 mb-3 text-white bg-dark"
                                                                            style="max-width: 280px;overflow-y: scrollable;overflow-x: hidden;">
                                                                            <div class="card-header" style="background-color:hsl(215, 18%, 20%);">
                                                                                <span><b class="me-2">[Task: {{ i + 1 }}]</b>
                                                                                    <button (click)="deleteTask(displayTask)" type="button" class="ms-2 btn deleteBtnSm border border-dark" data-bs-toggle="modal" data-bs-target="#exampleModalCenter" 
                                                                                        data-bs-backdrop="static" data-bs-keyboard="false" style="float: right !important;padding-top:5px !important;padding-left: 5px !important;max-width:28px !important;max-height:28px !important;">
                                                                                        <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" fill="red" class="mb-3 bi bi-trash3" viewBox="0 0 16 16">
                                                                                            <path fill-rule="evenodd" d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"/>
                                                                                        </svg>
                                                                                    </button>
                                                                                    <button (click)="openTaskModal(1,displayTask)" class="ms-4 btn btn-info"  data-bs-toggle="modal" data-bs-target="#exampleModalCenter"
                                                                                    data-bs-backdrop="static" data-bs-keyboard="false" style="float: right !important;padding-left: 5px !important;max-width:28px !important;max-height:28px !important;">
                                                                                    <svg viewBox="0 0 16 16" width="16" height="16" class="mb-3 bi bi-pencil-square" xmsns="http://www.w3.org/2000/svg" fill="currentColor">
                                                                                        <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                                                                                        <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"
                                                                                    /></svg></button>
                                                                                </span></div>
                                                                            <div class="card-body" style="max-height:205px;background-color:hsl(215, 18%, 20%);overflow-y:scroll;">
                                                                                <span><b class="card-text text-info">Description:</b><p class="card-text" style="color:#85abb8">
                                                                                    {{ displayTask.TASK_DESCRIPTION }}</p></span>
                                                                                <p></p><span><b class="card-text text-info">Matter:</b><p class="card-text" style="color:#85abb8">
                                                                                    {{ displayTask.MATTER }}</p></span>
                                                                                <p></p><span><b class="card-text text-info">Fee Earners:</b><p class="card-text" style="color:#85abb8">
                                                                                    {{ displayTask.FEE_EARNERS }}</p></span>
                                                                                <p></p><span><b class="card-text text-info">Skills:</b>
                                                                                    <p class="card-text" [innerHTML]="sanitize(displayTask.SKILLS! | skillColor: this.skills$)"></p>
                                                                                </span></div>
                                                                            </div></ng-template>
                                                                       </div>
                                                                   </div>
                                                               </div>
                                                           </div>
                                                       </div>
                                                    </div>
                                               </div>
                                            </p-panel></div>
                                            <div style="z-index:11;position:relative;bottom:40px;min-width:620px;max-width:716px;" class="panel"><p-panel [collapsed]="true"
                                                *ngIf="(userType$|async)=='Reviewer'&&ViewDiaryPanel&&step==3" header="TRACR | Tasks"
                                                [toggleable]="true">
                                                <div style="height:fit-content;max-height: 400px;overflow-x: hidden;">
                                                    <h5 class="ms-3 text-light">View Tasks:</h5>
                                                    <div class="row" style="min-width: 700px;">
                                                        <div class="col-sm-12">
                                                            <div class="card" style="background-color:hsl(215, 18%, 20%);">
                                                                <div class="card-body">
                                                                    <div class="p-4 pt-0">
                                                                        <div class="d-flex row" style="background-color:hsl(217, 18%, 20%);">
                                                                            <div *ngIf="!tasksVisible; else diaryTasks" class="h-100 mt-4 pe-5 pb-2 d-flex align-items-center justify-content-center text-info" style="margin-top:1vh;">
                                                                                <strong class="me-3 text-info">Loading...</strong>
                                                                                <div role="status" class="mb-0 text-info spinner-border" aria-hidden="true"></div>
                                                                            </div>
                                                                            <ng-template #diaryTasks>
                                                                                <div *ngFor="let displayTask of displayTasks$;let i = index" class="card col-6 py-2 me-4 mb-3 text-white bg-dark"
                                                                                    style="max-width: 280px;overflow-y: scrollable;overflow-x: hidden;">
                                                                                    <div class="card-header" style="background-color:hsl(215, 18%, 20%);">
                                                                                        <span><b class="me-2">[Task: {{ i + 1 }}]</b>
                                                                                            <button (click)="deleteTask(displayTask)" type="button" class="ms-2 btn deleteBtnSm border border-dark" data-bs-toggle="modal" data-bs-target="#exampleModalCenter" 
                                                                                                data-bs-backdrop="static" data-bs-keyboard="false" style="float: right !important;padding-top:5px !important;padding-left: 5px !important;max-width:28px !important;max-height:28px !important;">
                                                                                                <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" fill="red" class="mb-3 bi bi-trash3" viewBox="0 0 16 16">
                                                                                                    <path fill-rule="evenodd" d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"/>
                                                                                                </svg>
                                                                                            </button>
                                                                                            <button (click)="openTaskModal(1,displayTask)" class="ms-4 btn btn-info"  data-bs-toggle="modal" data-bs-target="#exampleModalCenter"
                                                                                            data-bs-backdrop="static" data-bs-keyboard="false" style="float: right !important;padding-left: 5px !important;max-width:28px !important;max-height:28px !important;">
                                                                                            <svg viewBox="0 0 16 16" width="16" height="16" class="mb-3 bi bi-pencil-square" xmsns="http://www.w3.org/2000/svg" fill="currentColor">
                                                                                                <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                                                                                                <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"
                                                                                            /></svg></button>
                                                                                        </span></div>
                                                                                    <div class="card-body" style="max-height:205px;background-color:hsl(215, 18%, 20%);overflow-x:scroll;">
                                                                                        <span><b class="card-text text-info">Description:</b><p class="card-text" style="color:#85abb8">
                                                                                            {{ displayTask.TASK_DESCRIPTION }}</p></span>
                                                                                        <p></p><span><b class="card-text text-info">Matter:</b><p class="card-text" style="color:#85abb8">
                                                                                            {{ displayTask.MATTER }}</p></span>
                                                                                        <p></p><span><b class="card-text text-info">Fee Earners:</b><p class="card-text" style="color:#85abb8">
                                                                                            {{ displayTask.FEE_EARNERS }}</p></span>
                                                                                        <p></p><span><b class="card-text text-info">Skills:</b>
                                                                                            <p class="card-text" [innerHTML]="sanitize(displayTask.SKILLS! | skillColor: this.skills$)"></p>
                                                                                        </span>
                                                                                    </div>
                                                                                </div>
                                                                            </ng-template>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </p-panel>
                                        </div>
                                        <div style="overflow-y:none;z-index:11;position:relative;bottom:55px;min-width:620px;max-width:716px;" class="panel"><p-panel
                                                *ngIf="(userType$|async)=='Trainee'&&step==4;" header="TRACR | View Diary"
                                                [toggleable]="true">
                                                <div *ngIf="ViewDiaryPanel"
                                                    style="height:fit-content;padding-bottom: 10px; overflow-y: none;">
                                                    <div class="row" style="min-width: 500px;">
                                                        <div class="col-sm-12">
                                                            <div class="card" style="background-color:rgb(42, 50, 61);">
                                                                <div class="card-body">
                                                                    <h5 class="card-title ps-4 p-0"
                                                                        style="margin-bottom:9px !important;">
                                                                        Diary week: <span
                                                                            style="font-size: 15px;color: rgb(13, 202, 240);">
                                                                            {{ this.currentDiary.WEEK_BEGINNING!.slice(0, -9) }}</span></h5>
                                                                    <h5 class="position-relative"
                                                                        style="bottom:32px;left:323px;margin-bottom:0px !important;">
                                                                        Reviewer: <span
                                                                            style="font-size: 16px;color: rgb(13, 202, 240);">
                                                                            {{ defaultUserReviewer$.FirstName!+' '+defaultUserReviewer$.LastName! }}</span></h5>
                                                                    <div class="p-4 pt-0">
                                                                        <div
                                                                            style="overflow-x:hidden !important;overflow-y:scroll;max-height:479px !important;">
                                                                            <div class="card text-white mb-3" [ngStyle]="{'background-color':!diarySignedOff?'#2f3947f2':'#32486375'}"
                                                                                style="max-width: 34rem;">
                                                                                <div class="card-header" [ngStyle]="{'background-color': diarySignedOff?'#93a1b175':'#22272b63'}"><b>Practice Area:</b><button *ngIf="!diarySignedOff" style="float:right;padding-top:0px!important;padding-bottom:1px!important" class="px-1 btn text-info">
                                                                                    <svg viewBox="0 0 16 16" width="16" height="16" class="bi bi-pencil-square" xmsns="http://www.w3.org/2000/svg" fill="currentColor">
                                                                                <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                                                                                <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"
                                                                            /></svg></button></div>
                                                                                <div class="card-body">
                                                                                    <p class="card-text" style="color:#d9d9d9">{{
                                                                                        this.currentDiary.LEARNING_POINTS
                                                                                    }}</p>
                                                                                </div>
                                                                            </div>
                                                                            <div class="card text-white mb-3" [ngStyle]="{'background-color':!diarySignedOff?'#2f3947f2':'#32486375'}"
                                                                                style="max-width: 34rem;">
                                                                                <div class="card-header" [ngStyle]="{'background-color': diarySignedOff?'#93a1b175':'#22272b63'}"><b>Learning Points:</b><button *ngIf="!diarySignedOff" style="float:right;padding-top:0px!important;padding-bottom:1px!important" class="px-1 btn text-info">
                                                                                    <svg viewBox="0 0 16 16" width="16" height="16" class="bi bi-pencil-square" xmsns="http://www.w3.org/2000/svg" fill="currentColor">
                                                                                <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                                                                                <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"
                                                                            /></svg></button>
                                                                                </div>
                                                                                <div class="card-body">
                                                                                    <p class="card-text" style="color:#d9d9d9">{{
                                                                                        this.currentDiary.LEARNING_POINTS}}</p>
                                                                                </div>
                                                                            </div>
                                                                            <div class="card text-white mb-3" [ngStyle]="{'background-color':!diarySignedOff?'#2f3947f2':'#32486375'}"
                                                                                style="max-width: 34rem;">
                                                                                <div class="card-header" [ngStyle]="{'background-color': diarySignedOff?'#93a1b175':'#22272b63'}"><b>Professional
                                                                                        Development Undertaken:</b><button *ngIf="!diarySignedOff" style="float:right;padding-top:0px!important;padding-bottom:1px!important" class="px-1 btn text-info">
                                                                                            <svg viewBox="0 0 16 16" width="16" height="16" class="bi bi-pencil-square" xmsns="http://www.w3.org/2000/svg" fill="currentColor">
                                                                                <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                                                                                <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"
                                                                            /></svg></button></div>
                                                                                <div class="card-body">
                                                                                    <p class="card-text" style="color:#d9d9d9">{{
                                                                                        this.currentDiary.PROFESSIONAL_DEVELOPMENT_UNDERTAKEN
                                                                                        }}</p>
                                                                                </div>
                                                                            </div>
                                                                            <div class="card text-white mb-3" [ngStyle]="{'background-color':!diarySignedOff?'#2f3947f2':'#32486375'}"
                                                                                style="max-width: 34rem;">
                                                                                <div class="card-header" [ngStyle]="{'background-color': diarySignedOff?'#93a1b175':'#22272b63'}"><b>Professional Conduct
                                                                                        Issues:</b><button *ngIf="!diarySignedOff" style="float:right;padding-top:0px!important;padding-bottom:1px!important" class="px-1 btn text-info">
                                                                                            <svg viewBox="0 0 16 16" width="16" height="16" class="bi bi-pencil-square" xmsns="http://www.w3.org/2000/svg" fill="currentColor">
                                                                                <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                                                                                <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"
                                                                            /></svg></button></div>
                                                                                <div class="card-body">
                                                                                    <p class="card-text" style="color:#d9d9d9">{{
                                                                                        this.currentDiary.PROFESSIONAL_CONDUCT_ISSUES
                                                                                        }}</p>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <button (click)="SubmitSignOff(this.currentDiary)" [disabled]="disableSubmit"
                                                        href="javascript:void(0);" [class]="signOffSubmitted&&!diarySignedOff ? 'mt-0' : 'mt-3'" [style.background-color]="!diarySignedOff ? '#7693a3!important' : '#05d5ff5b!important'" class="btn"
                                                        style="float:left;position:relative;bottom:32px;width:645px;max-height: fit-content;">
                                                        <span *ngIf="!diarySignedOff"><b> {{ disableSubmit ? 'Submitted' : 'Submit for sign off' }}</b></span>
                                                        </button>
                                                    </div>
                                            </p-panel>
                                        </div>
                                        <div style="overflow-y:none;z-index:11;position:relative;bottom:55px;min-width:620px;max-width:716px;" class="panel"><p-panel
                                            *ngIf="(userType$|async)=='Reviewer'&&step==3;" [header]="'TRACR | View Diary'"
                                            [toggleable]="true">
                                            <div *ngIf="ViewDiaryPanel"
                                                style="height:fit-content;height:550px;overflow-y: none;">
                                                <div class="row" style="min-width: 500px;">
                                                    <div class="col-sm-12">
                                                        <div class="card" style="background-color:rgb(42, 50, 61);">
                                                            <div class="card-body">
                                                                <h5 class="card-title"
                                                                    style="margin-bottom:9px !important;">
                                                                    Diary week: <span
                                                                        style="font-size: 14px;color: rgb(13, 202, 240);">
                                                                        {{ this.currentDiary.WEEK_BEGINNING!.slice(0, -9) }}</span></h5>
                                                                <h5 class="position-relative ps-xxl-3 ps-5"
                                                                    style="bottom:32px;left:370px;margin-bottom:0px !important;">
                                                                    Reviewer: <span
                                                                        style="font-size: 14px;color: rgb(13, 202, 240);">
                                                                        {{ this.getReviewerByRevPfid(this.currentDiary.PFID!)?.FirstName!  }} (you)</span></h5>
                                                                <div class="p-4 pt-0">
                                                                    <div
                                                                        style="overflow-x:hidden !important;overflow-y:scroll;max-height:420px !important;">
                                                                        <div class="card text-white mb-3" [ngStyle]="{'background-color':!diarySignedOff?'#2f3947f2':'#32486375'}"
                                                                            style="max-width: 34rem;">
                                                                            <div class="card-header" [ngStyle]="{'background-color': diarySignedOff?'#93a1b175':'#22272b63'}"><b>Practice Area:</b><button *ngIf="!diarySignedOff" style="float:right;padding-top:0px!important;padding-bottom:1px!important" class="px-1 btn text-info">
                                                                                <svg viewBox="0 0 16 16" width="16" height="16" class="bi bi-pencil-square" xmsns="http://www.w3.org/2000/svg" fill="currentColor">
                                                                                <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                                                                                <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"
                                                                            /></svg></button></div>
                                                                            <div class="card-body">
                                                                                <p class="card-text" style="color:#d9d9d9">{{
                                                                                    this.currentDiary.LEARNING_POINTS
                                                                                }}</p>
                                                                            </div>
                                                                        </div>
                                                                        <div class="card text-white mb-3" [ngStyle]="{'background-color':!diarySignedOff?'#2f3947f2':'#32486375'}" 
                                                                            style="max-width: 34rem;">
                                                                            <div class="card-header" [ngStyle]="{'background-color': diarySignedOff?'#93a1b175':'#22272b63'}"><b>Learning Points:</b><button *ngIf="!diarySignedOff" style="float:right;padding-top:0px!important;padding-bottom:1px!important" class="px-1 btn text-info">
                                                                                <svg viewBox="0 0 16 16" width="16" height="16" class="bi bi-pencil-square" xmsns="http://www.w3.org/2000/svg" fill="currentColor">
                                                                                <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                                                                                <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"
                                                                            /></svg></button>
                                                                            </div>
                                                                            <div class="card-body">
                                                                                <p class="card-text" style="color:#d9d9d9">{{
                                                                                    this.currentDiary.LEARNING_POINTS}}</p>
                                                                            </div>
                                                                        </div>
                                                                        <div class="card text-white mb-3" [ngStyle]="{'background-color':!diarySignedOff?'#2f3947f2':'#32486375'}"
                                                                            style="max-width: 34rem;">
                                                                            <div class="card-header" [ngStyle]="{'background-color': diarySignedOff?'#93a1b175':'#22272b63'}"><b>Professional
                                                                                    Development Undertaken:</b><button *ngIf="!diarySignedOff" style="float:right;padding-top:0px!important;padding-bottom:1px!important" class="px-1 btn text-info">
                                                                                        <svg viewBox="0 0 16 16" width="16" height="16" class="bi bi-pencil-square" xmsns="http://www.w3.org/2000/svg" fill="currentColor">
                                                                                <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                                                                                <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"
                                                                            /></svg></button></div>
                                                                            <div class="card-body">
                                                                                <p class="card-text" style="color:#d9d9d9">{{
                                                                                    this.currentDiary.PROFESSIONAL_DEVELOPMENT_UNDERTAKEN
                                                                                    }}</p>
                                                                            </div>
                                                                        </div>
                                                                        <div class="card text-white mb-3" [ngStyle]="{'background-color':!diarySignedOff?'#2f3947f2':'#32486375'}"
                                                                            style="max-width: 34rem;">
                                                                            <div class="card-header" [ngStyle]="{'background-color': diarySignedOff?'#93a1b175':'#22272b63'}"><b>Professional Conduct
                                                                                    Issues:</b><button *ngIf="!diarySignedOff" style="float:right;padding-top:0px!important;padding-bottom:1px!important" class="px-1 btn text-info">
                                                                                        <svg viewBox="0 0 16 16" width="16" height="16" class="bi bi-pencil-square" xmsns="http://www.w3.org/2000/svg" fill="currentColor">
                                                                                <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                                                                                <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"
                                                                            /></svg></button></div>
                                                                            <div class="card-body">
                                                                                <p class="card-text" style="color:#d9d9d9">{{
                                                                                    this.currentDiary.PROFESSIONAL_CONDUCT_ISSUES
                                                                                    }}</p>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <button (click)="SignOff(this.currentDiary)" [disabled]="!signOffSubmitted" href="javascript:void(0);"
                                                    [class]="signOffSubmitted&&!diarySignedOff ? 'mt-0' : 'mt-3'" [style.background-color]="signOffSubmitted&&!diarySignedOff ? '#ffc107!important' : '#05d5ff5b!important'" class="btn"
                                                    style="float:left;position:relative;bottom:32px;width:645px;max-height: fit-content;">
                                                    <span *ngIf="signOffSubmitted&&!diarySignedOff"><b>Sign off diary</b></span>
                                                </button>
                                            </div>
                                        </p-panel>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-xxl-6">
                            <div class="row">
                                <div class="d-none d-xxl-block col-xl-4 col-xl-8 ms-xxl-4 mt-2 ms-0" style="padding-top:150px!important;width:540px; float:right;">
                                    <h2 style="font-size: 25px;color:#0dcaf09e!important" class="ps-5">Noel Rhima | Skills Used</h2>
                                    <div class="card bg-transparent border-0">
                                        <div *ngIf="!skillsWithOccurrences" class="h-100 d-flex align-items-center justify-content-center text-info" style="position:relative;left:5px;top:125px;">
                                            <strong class="me-3 text-info">Loading...</strong>
                                            <div role="status" class="mb-1 text-info spinner-border" aria-hidden="true"></div>
                                        </div>
                                        <div *ngIf="ViewDiaryPanel&&skillsWithOccurrences" style="z-index:10;width:540px; float:right;" class="pe-xxl-5 pe-0 chart-container">
                                            <app-chart [skillsWithOccurrences]="skillsWithOccurrences"></app-chart>
                                        </div>      
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </ng-template>
    <div class="container px-5 py-0" style="overflow-y:visible!important; overflow-x: hidden;">
        <div class="row">
            <div class="p-0 m-0 col-12 col-xxl-4 col-xl-5 col-lg-6 col-md-7" style="min-height:100vh;z-index:12">
                <p-sidebar [(visible)]="barVisible" [blockScroll]="false" [modal]="false" [style]="{width:'510px'}"
                    [showCloseIcon]="false" dismissableMask="true">
                    <div class="row"><div class="btn" (click)="reload()" *ngIf="(userType$|async)=='Reviewer';" style="z-index:10000;position:absolute;top:89px;height:44px;width:200px;left:39px;"></div>
                        <div class="col ps-2 mt-5" *ngIf="(userType$|async)=='Unauthorized';">
                            <p-messages severity="error">
                                <ng-template pTemplate>
                                    <div class="ml-2"><p>You have not been given access to TRACR.Please contact heldpesk if you are authorized to use TRACR.</p></div>
                                </ng-template>
                            </p-messages></div>
                        <div class="col ps-2 mt-4" *ngIf="(userType$|async)=='Trainee';">
                            <p-card [header]="'Welcome, '+user$.FirstName" styleClass="cd">
                                <p class="m-0 mt-0">You have not created a diary. To create a new diary please select a week for your diary from the
                                    <span class="text-info">calendar</span> below:
                                </p>
                            </p-card>
                        </div>
                        <div class="col ps-2 mt-4" *ngIf="(userType$|async)=='Admin';">
                            <p-card [header]="'Welcome, '+user$.FirstName" styleClass="cd">
                                <div class="card d-flex justify-content-center"
                                    style="background-color:rgba(0, 0, 0, 0);max-width:fit-content;">
                                    <p-selectButton [options]="stateOptions" [(ngModel)]="menuVal" optionLabel="label"
                                        optionValue="menuVal" optionDisabled="constant">
                                    </p-selectButton>
                                </div>
                            </p-card>
                        </div>
                        <div class="col ps-2 mt-4" *ngIf="(userType$|async)=='Reviewer';">
                            <p-card [header]="'Welcome, '+user$.FirstName" styleClass="cd">
                                <div class="card d-flex justify-content-center"
                                    style="max-width:fit-content;background-color:rgba(145, 144, 144, 0);">
                                    <p-selectButton styleClass="sb2" [options]="stateOptions2" [(ngModel)]="menuVal"
                                        optionLabel="label" optionValue="menuVal"
                                        optionDisabled="constant">
                                    </p-selectButton>
                                </div>
                            </p-card>
                        </div>
                        <div class="d-flex p-0 mt-0 flex-column" style="top:0px;min-height:66vh;">
                            <div class="flex-grow-1 py-0 px-2 d-flex align-items-top" *ngIf="(userType$|async)=='Trainee';">
                                <div></div>
                            </div>
                            <div class="col ps-2 pe-3 m-0 mt-0">
                                <div *ngIf="(userType$ | async)?.toLowerCase() === 'reviewer' && menuVal === 'Current' && (step === 2 || step === 3);" class="ps-0 position-relative">
                                    <div class="row overlay d-none d-md-flex" [style.left]="overlayMax" style="width:57px;position:absolute;z-index:1000;top:120px;">
                                        <div class="col-12 overlay2 AA" [class]="A+' '+active" 
                                        (click)="selected(1,true)" style="min-height:57px;margin-top:6px;"></div>
                                        <div class="col-12 overlay2 BB" [class]="B+' '+active" 
                                        (click)="selected(2,true)" style="min-height:57px;margin-top:0px;"></div>
                                        <div class="col-12 overlay2 CC" [class]="C+' '+active" 
                                        (click)="selected(3,true)" style="min-height:56px;margin-top:0px;"></div>
                                        <div class="col-12 overlay2 DD" [class]="D+' '+active" 
                                        (click)="selected(4,true)" style="min-height:57px;margin-top:0px;"></div>
                                        <div class="col-12 overlay2 EE" [class]="E+' '+active" (click)="selected(5,true)" style="min-height:59px;margin-top:1px;"></div>
                                    </div>
                                    <div class="row overlay d-md-none d-md-flex" style="width:57px;position:absolute;z-index:1000;left:15px;top:105px;">
                                        <div class="col-12 overlay2" [class]="A" 
                                        (click)="selected(1,true)" style="min-height:41px;margin-top:0px;"></div>
                                        <div class="col-12 overlay2" [class]="B" 
                                        (click)="selected(2,true)" style="min-height:40px;margin-top:0px;"></div>
                                        <div class="col-12 overlay2" [class]="C" 
                                        (click)="selected(3,true)" style="min-height:41px;margin-top:0px;"></div>
                                        <div class="col-12 overlay2" [class]="D" 
                                        (click)="selected(4,true)" style="min-height:43px;margin-top:0px;"></div>
                                        <div class="col-12 overlay2" [class]="E" (click)="selected(5,true)" style="min-height:60px;margin-top:0px;"></div>
                                    </div>
                                    <div class="card p-0 d-flex justify-content-center align-items-center"
                                    style="margin-top:40px !important;border-color:#00000000;background-color:#00000000;">
                                    <p-calendar #calendarElement [(ngModel)]="date" [disabledDays]="[0,1,2,3,4,5,6]" class="max-w-full" 
                                    [inline]="true" [styleClass]="rowSelected" [showWeek]="true" class="cal" [firstDayOfWeek]="1">
                                    </p-calendar>
                                    </div>
                                </div>
                                <p-divider align="left">
                                    <div class="inline-flex align-items-center" *ngIf="(userType$|async)=='Trainee';">
                                        <i class="pi pi-calendar me-2 text-info"></i><b class="text-info">select week:</b>
                                    </div>
                                    <div class="inline-flex align-items-center" *ngIf="(userType$|async)=='Reviewer';">
                                        <i class="pi pi-user me-2 text-secondary"></i><b class="text-secondary">your
                                            trainees:
                                        </b>
                                    </div>
                                    <div class="inline-flex align-items-center"
                                        *ngIf="(userType$|async)=='Admin'&&menuVal=='Current'&&EditViewPanel==false;">
                                        <i class="pi pi-user me-2 text-secondary"></i><b class="text-secondary">current
                                            trainees:
                                        </b>
                                    </div>
                                </p-divider>
                                <div class="inline-flex align-items-center mt-3"
                                    *ngIf="(userType$|async)=='Admin'&&menuVal=='New';">
                                    <div class="border border-dark p-3 pb-0">
                                        <p class="text-secondary">Assign one or more trainees to a reviewer by using the
                                            drop down lists below and then click 'Save Changes'.
                                        </p>
                                    </div>
                                </div>
                                <div class="card flex justify-content-center mt-0 mb-5"
                                    *ngIf="(userType$|async)=='Admin'&&menuVal=='New';"
                                    style="background-color:#00000000;margin-top:34px!important;">
                                    <span class="p-float-label">
                                        <p-dropdown [options]="reviewers$" [(ngModel)]="selectedReviewer$"
                                            placeholder="Select a Reviewer" optionLabel="FirstName"
                                            inputId="float-label"></p-dropdown>
                                        <label for="float-label" class="text-secondary">Select a Reviewer</label>
                                    </span>
                                </div>
                                <div class="card flex justify-content-center mt-0"
                                    *ngIf="(userType$|async)=='Admin'&&menuVal=='New';"
                                    style="background-color: #00000000;margin-top:55px !important;max-height:5px !important;">
                                    <span class="p-float-label" style="min-width:459px">
                                        <p-multiSelect [options]="peopleFiltered$" [(ngModel)]="selectedTrainees"
                                            placeholder="Select Trainees" defaultLabel="Select trainees" optionLabel="FirstName">
                                            <ng-template let-value pTemplate="peopleFiltered$">
                                                <div class="flex align-items-center gap-2"
                                                    *ngFor="let trainee of reviewers$">
                                                    <img [class]="'profilePic'"
                                                        style="width:35px;height:32px;" />
                                                    <div>{{ trainee.FirstName }}</div>
                                                </div>
                                                <div *ngIf="!selectedTrainees">Select Trainees</div>
                                            </ng-template>
                                            <ng-template let-profile pTemplate="item">
                                                <div class="d-flex align-items-center">
                                                    <img
                                                        style="border-radius: 20%; width: 18px; margin-right: 5px;" />
                                                    <div>{{ profile.FirstName }}</div>
                                                </div>
                                            </ng-template>
                                        </p-multiSelect>
                                        <label for="float-label" class="text-secondary">Select Trainees</label>
                                    </span>
                                    <div style="position:absolute;top:10px;padding-left:260px;"><button type="button"
                                            class="mt-5 btn btn-outline-danger btn-sm">Remove</button>
                                        <button (click)="SetPairs(selectedReviewer$,selectedTrainees)"
                                            class="mt-5 ms-1 btn btn-outline-success btn-sm" style="min-height:31px;"
                                            type="button">Save Changes</button>
                                    </div>
                                </div>
                                <div class="card flex justify-content-center mt-0 mb-5"
                                    *ngIf="(userType$|async)=='Admin'&&menuVal=='Current'&&EditViewPanel==true;"
                                    style="background-color:#00000000;margin-top:34px!important;">
                                    <span class="p-float-label">
                                        <p-dropdown [options]="reviewers$" [(ngModel)]="selectedReviewer$" [placeholder]="this.getReviewerByRevPfid(this.trainees$[0].REVIEWER_PFID!)?.FirstName!"
                                            optionLabel="FirstName" inputId="float-label"></p-dropdown>
                                        <label for="float-label" class="text-secondary"> Edit reviewer:
                                            <span class="text-white">{{ this.getReviewerByRevPfid(this.trainees$[0].REVIEWER_PFID!)?.FirstName! }}</span>
                                        </label>
                                    </span>
                                </div>
                                <div class="card flex justify-content-center mt-0"
                                    *ngIf="(userType$|async)=='Admin'&&menuVal=='Current'&&EditViewPanel==true;"
                                    style="background-color: #00000000;margin-top:55px !important;max-height:5px !important;">
                                    <span class="p-float-label" style="min-width:459px">
                                        <p-multiSelect [disabled]="true" [options]="peopleFiltered$" [(ngModel)]="selectedTrainees"
                                        [placeholder]="this.trainees$[0].FirstName!" defaultLabel="Select trainees" optionLabel="FirstName">
                                            <ng-template let-value pTemplate="peopleFiltered$">
                                                <div class="flex align-items-center gap-2" *ngFor="let trainee of reviewers$">
                                                    <img [class]="'profilePic'" style="width:35px;height:32px;" />
                                                    <div>{{ trainee.FirstName }}</div>
                                                </div>
                                            </ng-template>
                                            <ng-template let-profile pTemplate="item">
                                                <div class="d-flex align-items-center">
                                                    <img
                                                        style="border-radius: 20%; width:35px;height:32px; margin-right: 5px;" />
                                                    <div>{{ profile.FirstName }}</div>
                                                </div>
                                            </ng-template>
                                        </p-multiSelect>
                                    </span>
                                    <div style="position:absolute;top:10px;padding-left:260px;"><button (click)="reload()" type="button"
                                            class="mt-5 btn btn-outline-danger btn-sm">Cancel</button>
                                        <button (click)="updatePairs(selectedReviewer$,this.trainees$[0])" class="mt-5 ms-1 btn btn-outline-success btn-sm"
                                            style="min-height:31px;" type="button">Save Changes
                                        </button>
                                    </div>
                                </div>
                                <div *ngIf="(trainees$==null||trainees$==undefined)&&((userType$|async)!=='Unauthorized')&&(userType$|async)!=='Admin'&&(userType$|async)!=='Trainee'"
                                class="h-100 pb-5 d-flex align-items-center justify-content-center text-info"
                                style="margin-top:1vh;">
                                    <strong class="me-3 text-info">Loading...</strong>
                                    <div role="status" class="mb-1 text-info spinner-border" aria-hidden="true"></div>
                                </div>
                                <div *ngIf="(userType$|async)=='Unauthorized'" class="h-100 pb-5 d-flex align-items-center justify-content-center text-info"
                                style="margin-top:1vh;">
                                    <strong class="me-3 text-info">Loading...</strong>
                                    <div role="status" class="mb-1 text-info spinner-border" aria-hidden="true"></div>
                                </div>
                                <div class="card bg-dark" *ngIf="(userType$|async)=='Reviewer'&&menuVal=='Current'&&(step==1||step==2||step==3)">
                                    <div class="list-group"
                                        style="height: fit-content;max-height: 460px; overflow-y: visible;">
                                        <a *ngFor="let trn of trainees$" href="javascript:void(0)"
                                            class="list-group-item list-group-item-action flex-column align-items-start"
                                            style="background-color:rgb(59, 61, 64);border:1px solid rgba(78, 78, 78, 0.762);">
                                            <div class="d-flex w-100 pt-2 justify-content-between">
                                                <h5 class="mb-1 text-light" style="margin-right:2px;">{{ trn.FirstName }}</h5>
                                                <small style="color:#2eb81cd9!important;margin-right:10px;margin-left:48px;">Active</small><img
                                                    [src]="trn.Photo"
                                                    style="border-radius: 20%; width:35px;height:32px;margin-right:auto;position:relative;left:-90px;" />
                                                </div><small class="text-muted">Reviewer: {{ this.user$.FirstName! + ' ' + this.user$.LastName! }}</small>
                                                <button (click)="openTraineeDiary(trn.TRAINEE_PFID!)" type="button" class="btn btn-secondary btn-sm"
                                                style="float:right !important;position:relative;bottom:13px;">View Diary
                                            </button>
                                            <div *ngIf="(userType$|async)=='Reviewer'&&menuVal=='Current'&&(step==2||step==3)" type="button"
                                                style="width:100px;height:40px;float:right !important;z-index:10000;position:relative;bottom:18px;left:90px;background-color:rgb(59, 61, 64);">
                                                <button [disabled]="openWeekDisabled" [class]="statusColor[0]" (click)="openViewDiary(false)" class="btn btn-secondary btn-sm" style="height:42px;border:2px solid rgb(34, 34, 34);">Open Diary</button>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                                <div class="card bg-dark" *ngIf="(userType$|async)=='Admin'&&menuVal=='Current'&&EditViewPanel==false">
                                    <div class="list-group"
                                        style="height: fit-content;max-height: 460px; overflow-y: scroll;">
                                        <a *ngFor="let trn of trainees$" href="javascript:void(0)"
                                            class="list-group-item list-group-item-action flex-column align-items-start"
                                            style="background-color:rgb(59, 61, 64);border:1px solid rgba(78, 78, 78, 0.762);">
                                            <div class="d-flex w-100 pt-2 justify-content-between">
                                                <h5 class="mb-1 text-light" style="margin-right:2px;">{{ trn.FirstName }}</h5>
                                                <small style="color:#2eb81cd9!important;margin-right:10px;margin-left:45px;">Active</small><img
                                                [src]="trn.Photo" style="border-radius: 20%;width:35px;height:32px;margin-right:auto;position:relative;left:-90px;" />
                                            </div>
                                            <span *ngIf="trn.REVIEWER_PFID !== null && trn.REVIEWER_PFID !== undefined && getReviewerByRevPfid(trn.REVIEWER_PFID) as reviewer">
                                                <small class="text-muted">Reviewer: {{ reviewer.FirstName }}</small>
                                                <button (click)="openEditView(trn.TRAINEE_PFID!)" type="button" class="btn btn-secondary btn-sm"
                                                    style="float:right !important;position:relative;bottom:13px;">Edit user
                                                </button>
                                            </span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <div *ngIf="(userType$ | async)?.toLowerCase() === 'trainee'" class="py-0 mb-2 d-flex ps-2 pe-5">
                                <div class="ps-0 position-relative">
                                    <div class="row overlay d-none d-md-flex" [style.left]="overlayMax" style="width:57px;position:absolute;z-index:1000;top:120px;">
                                        <div class="col-12 overlay2 AA" [class]="A+' '+active" 
                                        (click)="selected(1,false)" style="min-height:57px;margin-top:6px;"></div>
                                        <div class="col-12 overlay2 BB" [class]="B+' '+active" 
                                        (click)="selected(2,false)" style="min-height:57px;margin-top:0px;"></div>
                                        <div class="col-12 overlay2 CC" [class]="C+' '+active" 
                                        (click)="selected(3,false)" style="min-height:56px;margin-top:0px;"></div>
                                        <div class="col-12 overlay2 DD" [class]="D+' '+active" 
                                        (click)="selected(4,false)" style="min-height:57px;margin-top:0px;"></div>
                                        <div class="col-12 overlay2 EE" [class]="E+' '+active" (click)="selected(5,false)" style="min-height:59px;margin-top:1px;"></div>
                                    </div>
                                    <div class="row overlay d-md-none d-md-flex" style="width:57px;position:absolute;z-index:1000;left:15px;top:105px;">
                                        <div class="col-12 overlay2" [class]="A" 
                                        (click)="selected(1,false)" style="min-height:41px;margin-top:0px;"></div>
                                        <div class="col-12 overlay2" [class]="B" 
                                        (click)="selected(2,false)" style="min-height:40px;margin-top:0px;"></div>
                                        <div class="col-12 overlay2" [class]="C" 
                                        (click)="selected(3,false)" style="min-height:41px;margin-top:0px;"></div>
                                        <div class="col-12 overlay2" [class]="D" 
                                        (click)="selected(4,false)" style="min-height:43px;margin-top:0px;"></div>
                                        <div class="col-12 overlay2" [class]="E" (click)="selected(5,false)" style="min-height:60px;margin-top:0px;"></div>
                                    </div>
                                    <div class="card p-0 d-flex justify-content-center align-items-center"
                                        style="border-color:#00000000;background-color:#00000000; overflow-y: hidden !important;overflow-x: hidden !important;">
                                        <p-calendar #calendarElement [(ngModel)]="date" [disabledDays]="[0,1,2,3,4,5,6]"
                                            class="max-w-full" [inline]="true" [styleClass]="rowSelected" [showWeek]="true"
                                            class="cal" [firstDayOfWeek]="1">
                                        </p-calendar>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <ng-template pTemplate="footer" styleClass="f"><b *ngIf="(userType$|async)!=='Unauthorized';"
                            class="ps-2 pe-2 text-secondary d-inline-block border border-striped border-secondary"
                            style="margin-left:122px !important">Training Contract Record</b>
                    </ng-template>
                </p-sidebar>
                <p-sidebar [(visible)]="rightBarVisible" [modal]="false" [style]="{width:'495px'}" styleClass="secondBar"
                    [showCloseIcon]="true" [closeOnEscape]="true" dismissableMask="true" position="right">
                    <div class="row">
                        <div class="col ps-2 mt-5" *ngIf="(userType$|async)=='Unauthorized';">
                            <p-messages severity="error">
                                <ng-template pTemplate>
                                    <div class="ml-2">
                                        You have not been given access to TRACR. Please contact heldpesk if you are authorized to use TRACR.
                                    </div>
                                </ng-template>
                            </p-messages>
                        </div>
                        <div class="col ps-2 mt-4" *ngIf="(userType$|async)=='Trainee';">
                            <p-card [header]="'Welcome, '+user$.FirstName" styleClass="cd">
                                <p class="m-0 mt-0">You have not created a diary. To create a new diary please select a week
                                    for your diary from the
                                    <span class="text-info">calendar</span> below:
                                </p>
                            </p-card>
                        </div>
                        <div class="col ps-2 mt-4" *ngIf="(userType$|async)=='Admin';">
                            <p-card [header]="'Welcome, '+user$.FirstName" styleClass="cd">
                                <div class="card d-flex justify-content-center"
                                    style="background-color:rgba(0, 0, 0, 0);max-width:fit-content;">
                                    <p-selectButton [options]="stateOptions" [(ngModel)]="menuVal" optionLabel="label"
                                        optionValue="menuVal" optionDisabled="constant"></p-selectButton>
                                </div>
                            </p-card>
                        </div>
                        <div class="col ps-2 mt-4" *ngIf="(userType$|async)=='Reviewer';">
                            <p-card [header]="'Welcome, '+user$.FirstName" styleClass="cd">
                                <div class="card d-flex justify-content-center"
                                    style="max-width:fit-content;background-color:rgba(0, 0, 0, 0);">
                                    <p-selectButton styleClass="sb2" [options]="stateOptions2" [(ngModel)]="menuVal"
                                        optionLabel="label" optionValue="menuVal"
                                        optionDisabled="constant"></p-selectButton>
                                </div>
                            </p-card>
                        </div>
                        <div class="d-flex p-0 mt-0 flex-column" style="top:0px;min-height:66vh;">
                            <div class="flex-grow-1 py-0 px-2 d-flex align-items-top" *ngIf="(userType$|async)=='Trainee';">
                                <div></div>
                            </div>
                            <div class="col ps-2 pe-3 m-0 mt-0">
                                <p-divider align="left">
                                    <div class="inline-flex align-items-center" *ngIf="(userType$|async)=='Trainee';">
                                        <i class="pi pi-calendar me-2 text-info"></i><b class="text-info">select week:</b>
                                    </div>
                                    <div class="inline-flex align-items-center" *ngIf="(userType$|async)=='Reviewer';">
                                        <i class="pi pi-user me-2 text-secondary"></i><b class="text-secondary">your
                                            trainees:</b>
                                    </div>
                                    <div class="inline-flex align-items-center"
                                        *ngIf="(userType$|async)=='Admin'&&menuVal=='Current'&&EditViewPanel==false;">
                                        <i class="pi pi-user me-2 text-secondary"></i><b class="text-secondary">current
                                            trainees:</b>
                                    </div>
                                </p-divider>
                                <div class="inline-flex align-items-center mt-3"
                                    *ngIf="(userType$|async)=='Admin'&&menuVal=='New';">
                                    <div class="border border-dark p-3 pb-0">
                                        <p class="text-secondary">Assign one or more trainees to a reviewer by using the drop down lists below and then click 'Save Changes'.</p>
                                    </div>
                                </div>
                                <div class="card flex justify-content-center mt-0 mb-5"
                                    *ngIf="(userType$|async)=='Admin'&&menuVal=='New';"
                                    style="background-color:#00000000;margin-top:34px!important;">
                                    <span class="p-float-label">
                                        <p-dropdown [options]="reviewers$" [(ngModel)]="selectedReviewer$"
                                            placeholder="Select a Reviewer" optionLabel="FirstName"
                                            inputId="float-label"></p-dropdown>
                                        <label for="float-label" class="text-secondary">Select a Reviewer</label>
                                    </span>
                                </div>
                                <div class="card flex justify-content-center mt-0"
                                    *ngIf="(userType$|async)=='Admin'&&menuVal=='New';"
                                    style="background-color: #00000000;margin-top:55px !important;max-height:5px !important;">
                                    <span class="p-float-label" style="min-width:459px">
                                        <p-multiSelect [options]="peopleFiltered$" [(ngModel)]="selectedTrainees"
                                            placeholder="Select Trainees" defaultLabel="Select trainees"
                                            optionLabel="FirstName">
                                            <ng-template let-value pTemplate="peopleFiltered$">
                                                <div class="flex align-items-center gap-2"
                                                    *ngFor="let trainee of peopleFiltered$">
                                                    <img [class]="'profilePic'"
                                                        style="width:35px;height:32px;" />
                                                    <div>{{ trainee.FirstName }}</div>
                                                </div>
                                                <div *ngIf="!selectedTrainees">Select Trainees</div>
                                            </ng-template>
                                            <ng-template let-profile pTemplate="item">
                                                <div class="d-flex align-items-center">
                                                    <img
                                                        style="border-radius: 20%; width:35px;height:32px; margin-right: 5px;" />
                                                    <div>{{ profile.FirstName }}</div>
                                                </div>
                                            </ng-template>
                                        </p-multiSelect>
                                        <label for="float-label" class="text-secondary">Select Trainees</label>
                                    </span>
                                    <div style="position:absolute;top:10px;padding-left:260px;"><button type="button"
                                            class="mt-5 btn btn-outline-danger btn-sm">Remove</button>
                                        <button (click)="SetPairs(selectedReviewer$,selectedTrainees)"
                                            class="mt-5 ms-1 btn btn-outline-success btn-sm" style="min-height:31px;"
                                            type="button">Save Changes
                                        </button>
                                    </div>
                                </div>
                                <div class="card bg-dark" *ngIf="(userType$|async)=='Admin'&&menuVal=='Current'&&EditViewPanel==false">
                                    <div class="list-group"
                                        style="height: fit-content;max-height: 460px; overflow-y: scroll;">
                                        <a *ngFor="let trn of trainees$" href="javascript:void(0)"
                                            class="list-group-item list-group-item-action flex-column align-items-start"
                                            style="background-color:rgb(59, 61, 64);border:1px solid rgba(78, 78, 78, 0.762);">
                                            <div class="d-flex w-100 pt-2 justify-content-between">
                                                <h5 class="mb-1 text-light" style="margin-right:2px;">{{ trn.FirstName }}
                                                </h5>
                                                <small style="color:#2eb81cd9!important;margin-right:10px;margin-left:45px;">Active</small><img
                                                    [src]="trn.Photo"
                                                    style="border-radius: 20%; width:35px;height:32px;margin-right:auto;position:relative;left:-90px;" />
                                            </div>
                                            <span
                                                *ngIf="trn.REVIEWER_PFID !== null && trn.REVIEWER_PFID !== undefined && getReviewerByRevPfid(trn.REVIEWER_PFID) as reviewer">
                                                <small class="text-muted">Reviewer: {{ reviewer.FirstName }}</small>
                                                <button type="button" class="btn btn-secondary btn-sm"
                                                    style="float:right !important;position:relative;bottom:13px;">Edit
                                                    diary
                                                </button>
                                            </span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <div class="py-0 mb-2 d-flex ps-2 pe-5" *ngIf="(userType$|async)=='Trainee';">
                                <div class="ps-0 position-relative">
                                    <div class="row overlay d-none d-md-flex" style="width:57px;position:absolute;z-index:1000;left:16px;top:115px;">
                                        <div class="col-12 overlay2" [class]="A" 
                                        (click)="selected(1,true)" style="min-height:58px;margin-top:2px;"></div>
                                        <div class="col-12 overlay2" [class]="B" 
                                        (click)="selected(2,true)" style="min-height:57px;margin-top:0px;"></div>
                                        <div class="col-12 overlay2" [class]="C" 
                                        (click)="selected(3,true)" style="min-height:56px;margin-top:0px;"></div>
                                        <div class="col-12 overlay2" [class]="D" 
                                        (click)="selected(4,true)" style="min-height:56px;margin-top:0px;"></div>
                                        <div class="col-12 overlay2" [class]="E" (click)="selected(5,true)" style="min-height:62px;margin-top:0px;"></div>
                                    </div>
                                    <div class="row overlay d-md-none d-md-flex" style="width:57px;position:absolute;z-index:1000;left:15px;top:105px;">
                                        <div class="col-12 overlay2" [class]="A" 
                                        (click)="selected(1,true)" style="min-height:41px;margin-top:0px;"></div>
                                        <div class="col-12 overlay2" [class]="B" 
                                        (click)="selected(2,true)" style="min-height:40px;margin-top:0px;"></div>
                                        <div class="col-12 overlay2" [class]="C" 
                                        (click)="selected(3,true)" style="min-height:41px;margin-top:0px;"></div>
                                        <div class="col-12 overlay2" [class]="D" 
                                        (click)="selected(4,true)" style="min-height:41px;margin-top:0px;"></div>
                                        <div class="col-12 overlay2" [class]="E" (click)="selected(5,true)" style="min-height:60px;margin-top:0px;"></div>
                                    </div>
                                    <div class="card p-0 d-flex justify-content-center align-items-center"
                                        style="border-color:#00000000;background-color:#00000000;">
                                        <p-calendar #calendarElement [(ngModel)]="date" [disabledDays]="[0,1,2,3,4,5,6]"
                                            class="max-w-full" [inline]="true" [styleClass]="rowSelected" [showWeek]="true"
                                            class="cal" [firstDayOfWeek]="1"></p-calendar>
                                    </div>
                            </div></div>
                        </div></div>
                    <ng-template pTemplate="footer" styleClass="f"><b *ngIf="(userType$|async)!=='Unauthorized';"
                            class="ps-2 pe-2 text-secondary d-inline-block border border-striped border-secondary"
                            style="margin-left:122px !important">Training Contract Record</b></ng-template>
                </p-sidebar>
            </div>
            <div class="d-md-block d-none ps-xl-4 p-0 ps-lg-0 ps-md-4 col-xxl-8 col-11 col-xl-7 col-lg-6 col-md-5"
                style="overflow:none !important;max-height:86vh !important;">
                <div class="row">
                    <div class="col" style="padding-top:10px;">
                        <div *ngIf="(userType$|async)=='Unauthorized'; else landing;"
                            class="h-100 pb-5 d-flex align-items-center justify-content-center text-info"
                            style="margin-top:27vh;">
                            <strong class="me-3 text-info">Loading...</strong>
                            <div role="status" class="mb-1 text-info spinner-border" aria-hidden="true"></div>
                        </div>
                        <ng-template #landing>
                            <div class="card flex justify-content-center align-items-center d-flex"
                                style="border-color:#00000000;background-color:#00000000;">
                                <p-panel *ngIf="(userType$|async)=='Admin'&&step==1;" header="Training Contract Record" [toggleable]="true">
                                    <h3 class="border border-striped border-info p-5 text-secondary"
                                        style="border-style:dashed !important;">Step 1: Please select a trainee from the list...
                                    </h3>
                                </p-panel>
                                <p-panel *ngIf="(userType$|async)=='Trainee'&&step==3;" header="Training Contract Record"
                                    [toggleable]="true">
                                    <div *ngIf="newDiaryPanel">
                                        <h3>New Diary:</h3>
                                        <form class="form" [formGroup]="diaryForm" (ngSubmit)="onSubmitNewDiary()"
                                            #f="ngForm" style="min-width: 680px;">
                                            <div class="form-group mb-2">
                                                <label class="label text-light" for="#">Practice Area:</label>
                                                <input type="text" formControlName="LEARNING_POINTS"
                                                    [(ngModel)]="diary.LEARNING_POINTS"
                                                    class="bg-dark border-secondary text-light form-control"
                                                    [class.is-invalid]="diaryForm.get('LEARNING_POINTS')?.invalid && (submitted || diaryForm.get('LEARNING_POINTS')?.touched || diaryForm.get('LEARNING_POINTS')?.dirty)"
                                                    required />
                                                <span *ngIf="diaryForm.get('LEARNING_POINTS')?.errors?.['required']"
                                                    class="invalid-feedback" aria-describedby="basic-addon1">Practice Area is required</span>
                                            </div>
                                            <div class="form-group mb-2">
                                                <label class="label text-light" for="#">Learning Points:</label>
                                                <input type="text" formControlName="LEARNING_POINTS"
                                                    [(ngModel)]="diary.LEARNING_POINTS"
                                                    class="bg-dark border-secondary text-light form-control"
                                                    [class.is-invalid]="diaryForm.get('LEARNING_POINTS')?.invalid && (submitted || diaryForm.get('LEARNING_POINTS')?.touched || diaryForm.get('LEARNING_POINTS')?.dirty)"
                                                    required />
                                                <span *ngIf="diaryForm.get('LEARNING_POINTS')?.errors?.['required']"
                                                    class="invalid-feedback" aria-describedby="basic-addon1">Learning Points is required</span>
                                            </div>
                                            <div class="form-group mb-2">
                                                <label class="label text-light" for="#">Professional Development Undertaken:</label>
                                                <textarea formControlName="PROFESSIONAL_DEVELOPMENT_UNDERTAKEN"
                                                    [(ngModel)]="diary.PROFESSIONAL_DEVELOPMENT_UNDERTAKEN"
                                                    class="bg-dark border-secondary text-light form-control"
                                                    [class.is-invalid]="diaryForm.get('PROFESSIONAL_DEVELOPMENT_UNDERTAKEN')?.invalid && (submitted || diaryForm.get('PROFESSIONAL_DEVELOPMENT_UNDERTAKEN')?.touched || diaryForm.get('PROFESSIONAL_DEVELOPMENT_UNDERTAKEN')?.dirty)"
                                                    required></textarea>
                                                <span
                                                    *ngIf="diaryForm.get('PROFESSIONAL_DEVELOPMENT_UNDERTAKEN')?.errors?.['required']"
                                                    class="invalid-feedback">Professional Development is required</span>
                                            </div>
                                            <div class="form-group mb-4">
                                                <label class="label text-light" for="#">Professional Conduct Issues:</label>
                                                <textarea formControlName="PROFESSIONAL_CONDUCT_ISSUES"
                                                    [(ngModel)]="diary.PROFESSIONAL_CONDUCT_ISSUES"
                                                    class="bg-dark border-secondary text-light form-control"
                                                    [class.is-invalid]="diaryForm.get('PROFESSIONAL_CONDUCT_ISSUES')?.invalid && (submitted || diaryForm.get('PROFESSIONAL_CONDUCT_ISSUES')?.touched || diaryForm.get('PROFESSIONAL_CONDUCT_ISSUES')?.dirty)"
                                                    required></textarea>
                                                <span
                                                    *ngIf="diaryForm.get('PROFESSIONAL_CONDUCT_ISSUES')?.errors?.['required']"
                                                    class="invalid-feedback">Professional
                                                    Conduct Issues is required</span>
                                            </div>
                                            <div>
                                                <a class="btn btn-secondary me-1" [routerLink]="['/diaries']"
                                                    href="javascript:void(0);">Cancel</a>
                                                <button type="submit" (click)="submitted = true;"
                                                    class="btn btn-light ms-1">Save Changes</button>
                                            </div>
                                        </form>
                                    </div>
                                </p-panel>
                            </div>
                            <div class="card flex justify-content-center align-items-center d-flex"
                                *ngIf="(userType$|async)=='Trainee'&&menuVal=='Current'&&step==1;"
                                style="border-color:#00000000;background-color:#00000000;">
                                <p-panel header="Training Contract Record" [toggleable]="true">
                                    <h3 class="border border-striped border-info p-5 text-secondary"
                                        style="border-style:dashed !important;">
                                        Step 1: Please select the week for your diary...
                                    </h3>
                                </p-panel>
                            </div>
                            <div class="card flex justify-content-center align-items-center d-flex"
                                *ngIf="(userType$|async)=='Trainee'&&menuVal=='Current'&&step==2;"
                                style="border-color:#00000000;background-color:#00000000;">
                                <p-panel header="Training Contract Record" [toggleable]="true">
                                    <h3 class="border border-striped border-info p-5 text-secondary"
                                        style="border-style:dashed !important;">
                                        Step 2: Click the button below to open the week
                                    </h3>
                                    <button class="btn btn-info mt-2" (click)="openViewDiary(true)">Open Week</button>
                                </p-panel>
                            </div>
                            <div class="card flex justify-content-center align-items-center d-flex"
                                *ngIf="(userType$|async)=='Reviewer'&&menuVal=='Current'&&step==2;"
                                style="border-color:#00000000;background-color:#00000000;">
                                <p-panel header="Training Contract Record" [toggleable]="true">
                                    <h3 [class]="'border-'+statusColor[1]" class="border border-striped p-5 text-secondary"
                                        style="border-style:dashed !important;"><span [style.color]="statusColor[1] == 'info' ? '#6c757d!important' : '#ed5d5d6d!important'">
                                        {{ statusColor[1] == 'info' ? "Step 2: Click the button below to open the week" : "Step 2: the trainee hasn't created a diary for this date" }}</span>
                                    </h3>
                                    <button [disabled]="openWeekDisabled" [class]="'btn-'+statusColor[1]" [style.border]="'1px solid '+ statusColor[1] == 'secondary' ? '#ed5d5d6d' : 'secondary'"
                                    (click)="openViewDiary(false)" class="btn mt-2">Open Week</button>
                                </p-panel>
                            </div>
                            <div class="card flex justify-content-center align-items-center d-flex"
                                *ngIf="(userType$|async)=='Reviewer'&&menuVal=='Current'&&step==1;"
                                style="border-color:#00000000;background-color:#00000000;">
                                <p-panel header="Training Contract Record" [toggleable]="true">
                                    <h3 class="border border-striped border-info p-5 text-secondary"
                                    style="border-style:dashed !important;">Step 1: Please select a trainee from the list...</h3>
                                </p-panel>
                            </div>
                        </ng-template>
                        <button (click)="openTaskModal(0)" type="button" class="btn me-1 px-2 py-0" data-bs-toggle="modal" data-bs-target="#exampleModalCenter" data-bs-backdrop="static" data-bs-keyboard="false" style="z-index:1000;position:absolute;top:0px;right:0px;height:50px;width:100px;"></button>
                        <div class="modal fade" id="exampleModalCenter" tabindex="-1">
                            <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header bg-light">
                                <h5 class="modal-title">{{ modalOpenEdit ? 'Edit Field' : 'Add Field' }}</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body me-2">
                                <new-diarytask [task]="modalOpenEdit ? this.currentTask : null" *ngIf="modalOpenNew||modalOpenEdit" [modalOpen]="modalOpenEdit?'Edit':'New'" [diary]="this.currentDiary"></new-diarytask>
                                </div>
                                <div class="modal-footer bg-light">
                                <button style="z-index:10000" type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                <!-- <button (click)="closeDeleteModal(newDiaryTask)" data-bs-dismiss="modal" type="button" class="btn btn-danger">Delete</button> -->
                                <button *ngIf="modalOpenNew" data-bs-dismiss="modal" style="z-index:10000" (click)="taskModalSubmitted()" type="button" class="btn btn-info">Create</button>
                                <button *ngIf="modalOpenEdit" data-bs-dismiss="modal" style="z-index:10000" (click)="taskModalSubmitted()" type="button" class="btn btn-warning">Save Changes</button>
                                </div></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="bg-success" *ngIf="(((userType$|async)=='Reviewer'&&step==3)||((userType$|async)=='Trainee'))&&ViewDiaryPanel&&diarySignedOff"style="position:fixed;right:0px;top:46px;width:90vw;max-height:22px;overflow-x: hidden;overflow-y: hidden !important;">
        <p class="text-light" style="float:left;margin-left:340px;overflow-x: hidden;">Signed off by<b> {{ (userType$ | async) !== 'Reviewer' ? 
            defaultUserReviewer$.FirstName!+' '+defaultUserReviewer$.LastName! : this.user$.FirstName! + ' ' + this.user$.LastName! }}</b> on {{
                formatTimestamp(this.currentDiary.SIGNED_OFF_TIMESTAMP!) }}</p></div>
        <div class="bg-danger" *ngIf="(((userType$|async)=='Reviewer'&&step==3)||((userType$|async)=='Trainee'))&&ViewDiaryPanel&&signOffSubmitted&&!diarySignedOff" style="position:fixed;right:0px;top:46px;width:100vw;max-height:22px;overflow-x: hidden;overflow-y:hidden;">
        <p class="text-light" style="float:left;padding-left:524px;overflow-x: hidden;overflow-y:hidden;">Submitted for sign off. Changes can still be made to this week until it has been signed off</p></div>
    </div>        
</div>